swagger: "2.0"
basePath: /
consumes:
- application/json
definitions:
  InventoryItemItem:
    default: Unknown
    enum:
    - Unknown
    type: string
  LevelVersionDriver:
    default: Unknown
    enum:
    - Unknown
    - Docker
    - DockerCompose
    type: string
  TournamentVisibility:
    default: UnknownVisibility
    enum:
    - UnknownVisibility
    - Private
    - Unlisted
    - Public
    type: string
  UserSessionOutputTournamentAndTeam:
    properties:
      is_active:
        format: boolean
        type: boolean
      team:
        $ref: '#/definitions/dbTournamentTeam'
      tournament:
        $ref: '#/definitions/dbTournament'
    type: object
  dbAchievement:
    properties:
      argument:
        type: string
      author:
        $ref: '#/definitions/dbTournamentMember'
      author_id:
        type: string
      comment:
        type: string
      created_at:
        format: date-time
        type: string
      id:
        type: string
      is_global:
        format: boolean
        type: boolean
      level_validation:
        $ref: '#/definitions/dbLevelValidation'
      level_validation_id:
        type: string
      type:
        $ref: '#/definitions/dbAchievementType'
      updated_at:
        format: date-time
        type: string
    type: object
  dbAchievementType:
    default: Undefined
    enum:
    - Undefined
    - Buy1Level
    - Buy5Levels
    - Buy10Levels
    - Buy20Levels
    - Buy50Levels
    - Validate1Level
    - Validate5Levels
    - Validate10Levels
    - Validate20Levels
    - Validate50Levels
    - Validate1Coupon
    - Validate5Coupons
    - Validate10Coupons
    - Validate20Coupons
    - Validate50Coupons
    - Validate100Coupons
    - Author1Level
    - Author2Levels
    - Author5Levels
    - Author10Levels
    - EarlyAdopterTop100
    - EarlyAdopterTop1000
    - Old1Year
    - Send1PullRequest
    - Send2PullRequests
    - Send5PullRequests
    - Send10Pullrequests
    - Staff
    - Contributor
    - BugHunter
    - Moderator
    - HackThePlatform
    title: fields
    type: string
  dbCoupon:
    properties:
      created_at:
        format: date-time
        type: string
      hash:
        title: fields
        type: string
      id:
        type: string
      max_validation_count:
        format: int32
        type: integer
      tournament:
        $ref: '#/definitions/dbTournament'
        title: associations
      tournament_id:
        type: string
      updated_at:
        format: date-time
        type: string
      validations:
        items:
          $ref: '#/definitions/dbCouponValidation'
        type: array
      value:
        format: int32
        type: integer
    type: object
  dbCouponValidation:
    properties:
      author:
        $ref: '#/definitions/dbTournamentMember'
        title: associations
      author_id:
        type: string
      comment:
        title: fields
        type: string
      coupon:
        $ref: '#/definitions/dbCoupon'
      coupon_id:
        type: string
      created_at:
        format: date-time
        type: string
      id:
        type: string
      updated_at:
        format: date-time
        type: string
    type: object
  dbDump:
    properties:
      achievements:
        items:
          $ref: '#/definitions/dbAchievement'
        type: array
      coupon_validations:
        items:
          $ref: '#/definitions/dbCouponValidation'
        type: array
      coupons:
        items:
          $ref: '#/definitions/dbCoupon'
        type: array
      hypervisors:
        items:
          $ref: '#/definitions/dbHypervisor'
        type: array
      inventory_items:
        items:
          $ref: '#/definitions/dbInventoryItem'
        type: array
      level_flavors:
        items:
          $ref: '#/definitions/dbLevelFlavor'
        type: array
      level_instances:
        items:
          $ref: '#/definitions/dbLevelInstance'
        type: array
      level_subscriptions:
        items:
          $ref: '#/definitions/dbLevelSubscription'
        type: array
      level_validations:
        items:
          $ref: '#/definitions/dbLevelValidation'
        type: array
      level_versions:
        items:
          $ref: '#/definitions/dbLevelVersion'
        type: array
      levels:
        items:
          $ref: '#/definitions/dbLevel'
        type: array
      notifications:
        items:
          $ref: '#/definitions/dbNotification'
        type: array
      team_members:
        items:
          $ref: '#/definitions/dbTeamMember'
        type: array
      teams:
        items:
          $ref: '#/definitions/dbTeam'
        type: array
      tournament_members:
        items:
          $ref: '#/definitions/dbTournamentMember'
        type: array
      tournament_teams:
        items:
          $ref: '#/definitions/dbTournamentTeam'
        type: array
      tournaments:
        items:
          $ref: '#/definitions/dbTournament'
        type: array
      users:
        items:
          $ref: '#/definitions/dbUser'
        type: array
      whoswho_attempts:
        items:
          $ref: '#/definitions/dbWhoswhoAttempt'
        type: array
    type: object
  dbHypervisor:
    properties:
      address:
        type: string
      created_at:
        format: date-time
        type: string
      id:
        type: string
      level_instances:
        items:
          $ref: '#/definitions/dbLevelInstance'
        type: array
      name:
        type: string
      status:
        $ref: '#/definitions/dbHypervisorStatus'
      updated_at:
        format: date-time
        type: string
    type: object
  dbHypervisorStatus:
    default: Unknown
    enum:
    - Unknown
    - Active
    - Inactive
    type: string
  dbInventoryItem:
    properties:
      created_at:
        format: date-time
        type: string
      id:
        type: string
      item:
        $ref: '#/definitions/InventoryItemItem'
      owner:
        $ref: '#/definitions/dbTournamentMember'
      owner_id:
        type: string
      updated_at:
        format: date-time
        type: string
    type: object
  dbLevel:
    properties:
      author:
        type: string
      created_at:
        format: date-time
        type: string
      description:
        type: string
      homepage:
        title: repeated string tags = ;
        type: string
      id:
        type: string
      is_draft:
        format: boolean
        type: boolean
      locale:
        title: AuthorProfile
        type: string
      name:
        type: string
      preview_url:
        type: string
      updated_at:
        format: date-time
        type: string
      versions:
        items:
          $ref: '#/definitions/dbLevelVersion'
        type: array
    type: object
  dbLevelFlavor:
    properties:
      created_at:
        format: date-time
        type: string
      id:
        type: string
      instances:
        items:
          $ref: '#/definitions/dbLevelInstance'
        type: array
      level_version:
        $ref: '#/definitions/dbLevel'
      level_version_id:
        type: string
      updated_at:
        format: date-time
        type: string
    type: object
  dbLevelInstance:
    properties:
      created_at:
        format: date-time
        type: string
      flavor:
        $ref: '#/definitions/dbLevelFlavor'
      flavor_id:
        type: string
      hypervisor:
        $ref: '#/definitions/dbHypervisor'
      hypervisor_id:
        type: string
      id:
        type: string
      status:
        $ref: '#/definitions/dbLevelInstanceStatus'
      updated_at:
        format: date-time
        type: string
    type: object
  dbLevelInstanceStatus:
    default: Unknown
    enum:
    - Unknown
    - Active
    - Inactive
    type: string
  dbLevelList:
    properties:
      items:
        items:
          $ref: '#/definitions/dbLevel'
        type: array
    type: object
  dbLevelSubscription:
    properties:
      created_at:
        format: date-time
        type: string
      id:
        type: string
      level_flavor:
        $ref: '#/definitions/dbLevelFlavor'
      level_flavor_id:
        type: string
      tournament_team:
        $ref: '#/definitions/dbTournamentTeam'
      tournament_team_id:
        type: string
      updated_at:
        format: date-time
        type: string
      validations:
        items:
          $ref: '#/definitions/dbLevelValidation'
        type: array
    type: object
  dbLevelValidation:
    properties:
      author_comment:
        type: string
      corrector_comment:
        type: string
      created_at:
        format: date-time
        type: string
      id:
        type: string
      level_subscription:
        $ref: '#/definitions/dbLevelSubscription'
      level_subscription_id:
        type: string
      status:
        $ref: '#/definitions/dbLevelValidationStatus'
      tournament_member:
        $ref: '#/definitions/dbTournamentMember'
      tournament_member_id:
        type: string
      updated_at:
        format: date-time
        type: string
    type: object
  dbLevelValidationStatus:
    default: Unknown
    enum:
    - Unknown
    - Sent
    - Accepted
    - Refused
    - AutoAccepted
    type: string
  dbLevelVersion:
    properties:
      changelog:
        type: string
      created_at:
        format: date-time
        type: string
      driver:
        $ref: '#/definitions/LevelVersionDriver'
      flavors:
        items:
          $ref: '#/definitions/dbLevelFlavor'
        type: array
      id:
        type: string
      is_draft:
        format: boolean
        type: boolean
      is_latest:
        format: boolean
        type: boolean
      level:
        $ref: '#/definitions/dbLevel'
      level_id:
        type: string
      source_url:
        type: string
      updated_at:
        format: date-time
        type: string
      version:
        type: string
    type: object
  dbNotification:
    properties:
      args:
        type: string
      click_url:
        type: string
      created_at:
        format: date-time
        type: string
      id:
        type: string
      is_read:
        format: boolean
        type: boolean
      msg:
        type: string
      updated_at:
        format: date-time
        type: string
      user:
        $ref: '#/definitions/dbUser'
      user_id:
        type: string
    type: object
  dbTeam:
    properties:
      created_at:
        format: date-time
        type: string
      gravatar_url:
        type: string
      id:
        type: string
      locale:
        type: string
      members:
        items:
          $ref: '#/definitions/dbTeamMember'
        type: array
      name:
        type: string
      received_whoswho_attempts:
        items:
          $ref: '#/definitions/dbWhoswhoAttempt'
        type: array
      tournament_teams:
        items:
          $ref: '#/definitions/dbTournamentTeam'
        type: array
      updated_at:
        format: date-time
        type: string
    type: object
  dbTeamList:
    properties:
      items:
        items:
          $ref: '#/definitions/dbTeam'
        type: array
    type: object
  dbTeamMember:
    properties:
      created_at:
        format: date-time
        type: string
      id:
        type: string
      role:
        $ref: '#/definitions/dbTeamMemberRole'
      team:
        $ref: '#/definitions/dbTeam'
      team_id:
        type: string
      updated_at:
        format: date-time
        type: string
      user:
        $ref: '#/definitions/dbUser'
      user_id:
        type: string
    type: object
  dbTeamMemberRole:
    default: Undefined
    enum:
    - Undefined
    - Owner
    - Member
    type: string
  dbTournament:
    properties:
      coupons:
        items:
          $ref: '#/definitions/dbCoupon'
        type: array
      created_at:
        format: date-time
        type: string
      id:
        type: string
      is_default:
        format: boolean
        type: boolean
      name:
        type: string
      status:
        $ref: '#/definitions/dbTournamentStatus'
      teams:
        items:
          $ref: '#/definitions/dbTournamentTeam'
        type: array
      updated_at:
        format: date-time
        type: string
      visibility:
        $ref: '#/definitions/TournamentVisibility'
    type: object
  dbTournamentMember:
    properties:
      achievements:
        items:
          $ref: '#/definitions/dbAchievement'
        type: array
      coupons:
        items:
          $ref: '#/definitions/dbCoupon'
        type: array
      created_at:
        format: date-time
        type: string
      id:
        type: string
      items:
        items:
          $ref: '#/definitions/dbInventoryItem'
        type: array
      level_validations:
        items:
          $ref: '#/definitions/dbLevelValidation'
        type: array
      received_whoswho_attempts:
        items:
          $ref: '#/definitions/dbWhoswhoAttempt'
        type: array
      role:
        $ref: '#/definitions/dbTournamentMemberRole'
      sent_whoswho_attempts:
        items:
          $ref: '#/definitions/dbWhoswhoAttempt'
        type: array
      tournament_team:
        $ref: '#/definitions/dbTournamentTeam'
      tournament_team_id:
        type: string
      updated_at:
        format: date-time
        type: string
      user:
        $ref: '#/definitions/dbUser'
      user_id:
        type: string
    type: object
  dbTournamentMemberRole:
    default: Undefined
    enum:
    - Undefined
    - Owner
    - Member
    type: string
  dbTournamentStatus:
    default: UnknownStatus
    enum:
    - UnknownStatus
    - Started
    - Stopped
    type: string
  dbTournamentTeam:
    properties:
      created_at:
        format: date-time
        type: string
      id:
        type: string
      is_default:
        format: boolean
        type: boolean
      level_subscriptions:
        items:
          $ref: '#/definitions/dbLevelSubscription'
        type: array
      members:
        items:
          $ref: '#/definitions/dbTournamentMember'
        type: array
      team:
        $ref: '#/definitions/dbTeam'
      team_id:
        type: string
      tournament:
        $ref: '#/definitions/dbTournament'
      tournament_id:
        type: string
      updated_at:
        format: date-time
        type: string
    type: object
  dbUser:
    properties:
      active_tournament:
        $ref: '#/definitions/dbTournamentMember'
      active_tournament_id:
        type: string
      active_tournament_member:
        $ref: '#/definitions/dbTournamentMember'
      active_tournament_member_id:
        type: string
      created_at:
        format: date-time
        type: string
      email:
        type: string
      gravatar_url:
        type: string
      id:
        type: string
      locale:
        type: string
      memberships:
        items:
          $ref: '#/definitions/dbTeamMember'
        type: array
      notifications:
        items:
          $ref: '#/definitions/dbNotification'
        type: array
      tournament_memberships:
        items:
          $ref: '#/definitions/dbTournamentMember'
        type: array
      updated_at:
        format: date-time
        type: string
      username:
        type: string
      website_url:
        type: string
    title: User defines a User Account / Profile
    type: object
  dbWhoswhoAttempt:
    properties:
      author:
        $ref: '#/definitions/dbTournamentMember'
        title: associations
      author_id:
        type: string
      created_at:
        format: date-time
        type: string
      id:
        type: string
      success:
        format: boolean
        title: fields
        type: boolean
      target_member:
        $ref: '#/definitions/dbTournamentMember'
      target_member_id:
        type: string
      target_team:
        $ref: '#/definitions/dbTournamentTeam'
      target_team_id:
        type: string
      updated_at:
        format: date-time
        type: string
    type: object
  engineUserSessionOutput:
    properties:
      claims:
        $ref: '#/definitions/ssoClaims'
      is_new_user:
        format: boolean
        type: boolean
      notifications:
        format: int32
        type: integer
      tournaments:
        items:
          $ref: '#/definitions/UserSessionOutputTournamentAndTeam'
        type: array
      user:
        $ref: '#/definitions/dbUser'
    type: object
  engineVoid:
    example: {}
    title: Void is an empty message
    type: object
  pathwarengineInfo:
    properties:
      built_at:
        type: string
      built_by:
        type: string
      commit:
        type: string
      uptime:
        format: int32
        type: integer
      version:
        type: string
    type: object
  pathwarengineStatus:
    properties:
      everything_is_ok:
        format: boolean
        type: boolean
    type: object
  ssoActionToken:
    properties:
      asid:
        type: string
      aud:
        type: string
      auth_time:
        format: date-time
        type: string
      azp:
        type: string
      exp:
        format: date-time
        type: string
      iat:
        format: date-time
        type: string
      iss:
        type: string
      jti:
        type: string
      nbf:
        format: float
        type: number
      nonce:
        type: string
      scope:
        type: string
      session_state:
        title: additional keycloak internals
        type: string
      sub:
        type: string
      typ:
        type: string
    title: See https://www.keycloak.org/docs/latest/server_development/index.html#_action_token_anatomy
    type: object
  ssoClaims:
    properties:
      action_token:
        $ref: '#/definitions/ssoActionToken'
      email:
        type: string
      email_verified:
        format: boolean
        type: boolean
      family_name:
        type: string
      given_name:
        type: string
      preferred_username:
        type: string
    type: object
externalDocs:
  description: More about Pathwar
  url: https://github.com/pathwar/pathwar
host: api.pathwar.land
info:
  contact:
    email: staff@pathwar.land
    name: Pathwar Staff
    url: https://github.com/pathwar/pathwar
  license:
    name: (Apache-2.0 OR MIT)
    url: https://github.com/pathwar/pathwar/blob/master/COPYRIGHT
  title: Pathwar API
  version: "1.0"
paths:
  /dev/generate-fake-data:
    post:
      operationId: GenerateFakeData
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/engineVoid'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      tags:
      - Engine
  /dev/sql-dump:
    get:
      operationId: DBDump
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/dbDump'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      tags:
      - Engine
  /info:
    get:
      operationId: GetInfo
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/pathwarengineInfo'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      summary: dev helpers
      tags:
      - Engine
  /levels:
    get:
      operationId: ListLevels
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/dbLevelList'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      tags:
      - Engine
  /ping:
    get:
      operationId: Ping
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/engineVoid'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      summary: Verify the service is up and running
      tags:
      - Engine
  /preferences:
    post:
      operationId: SetPreferences
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/engineVoid'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      tags:
      - Engine
  /status:
    get:
      operationId: GetStatus
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/pathwarengineStatus'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      tags:
      - Engine
  /teams:
    get:
      operationId: ListTeams
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/dbTeamList'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      tags:
      - Engine
  /user-session:
    get:
      operationId: GetUserSession
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/engineUserSessionOutput'
        "403":
          description: Returned when the user does not have permission to access the
            resource.
          schema: {}
        "404":
          description: Returned when the resource does not exist.
          schema:
            format: string
            type: string
      summary: Get current user session, based on JWT token
      tags:
      - Engine
produces:
- application/json
schemes:
- https
- wss
security:
- ApiKeyAuth: []
  BasicAuth: []
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: X-API-Key
    type: apiKey
  BasicAuth:
    type: basic
